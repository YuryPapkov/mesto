!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(0);function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._formElement=n}var t,n,o;return t=e,(n=[{key:"enableValidation",value:function(){this._getInputList(),this._getSubmitButtonElement(),this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}},{key:"clearErrors",value:function(){var e=this;this._inputList.forEach((function(t){e._hideInputError(t)})),this._toggleSubmitButtonState(this._submitButton)}},{key:"_getInputList",value:function(){var e=Array.from(this._formElement.querySelectorAll(this._inputSelector));return this._inputList=e,this._inputList}},{key:"_getSubmitButtonElement",value:function(){var e=this._formElement.querySelector(this._submitButtonSelector);return this._buttonElement=e,this._buttonElement}},{key:"_getErrorElement",value:function(e){return this._formElement.querySelector(".popup__error_type_".concat(e.name))}},{key:"_setEventListeners",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleSubmitButtonState()})),t.addEventListener("focus",(function(){e._toggleSubmitButtonState()}))}))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_hideInputError",value:function(e){var t=this._getErrorElement(e);e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}},{key:"_showInputError",value:function(e,t){var n=this._getErrorElement(e);e.classList.add(this._inputErrorClass),n.classList.add(this._errorClass),n.textContent=t}},{key:"_toggleSubmitButtonState",value:function(){this._hasInvalidInput(this._inputList)?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.removeAttribute("disabled"))}},{key:"_hasInvalidInput",value:function(){return!!this._inputList.some((function(e){return!e.validity.valid}))}}])&&r(t.prototype,n),o&&r(t,o),e}();function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._link=t.link,this._templateSelector=n,this._popupHandler=r}var t,n,r;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.cloneNode(!0)}},{key:"_handleLikeButton",value:function(e){e.target.classList.toggle("card__like-button_pressed")}},{key:"_deleteCard",value:function(e){e.target.parentElement.remove()}},{key:"_setEventListeners",value:function(e){var t=this;this._element.querySelector(".card__like-button").addEventListener("click",this._handleLikeButton),this._element.querySelector(".card__delete-button").addEventListener("click",this._deleteCard),e.addEventListener("click",(function(){return t._popupHandler(t._name,t._link)}))}},{key:"renderCard",value:function(){this._element=this._getTemplate();var e=this._element.querySelector(".card__image");return e.src=this._link,e.alt=this._name,this._setEventListeners(e),this._element.querySelector(".card__title").textContent=this._name,this._element}}])&&i(t.prototype,n),r&&i(t,r),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._renderer=o,this._container=document.querySelector(n)}var t,n,r;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._renderedItems.forEach((function(t){e._renderer(t)}))}},{key:"insertItem",value:function(e){this._container.append(e)}}])&&a(t.prototype,n),r&&a(t,r),e}();function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._modal=document.querySelector(t),this._closeButton=this._modal.querySelector(".popup__close-button"),this.close=this.close.bind(this),this._handleEscClose=this._handleEscClose.bind(this)}var t,n,r;return t=e,(n=[{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._closeButton.addEventListener("click",this.close),this._modal.addEventListener("click",(function(t){t.target.classList.contains("popup_opened")&&e.close()}))}},{key:"open",value:function(){this._modal.classList.add("popup_opened"),document.addEventListener("keyup",this._handleEscClose)}},{key:"close",value:function(){this._modal.classList.remove("popup_opened"),document.removeEventListener("keyup",this._handleEscClose)}}])&&s(t.prototype,n),r&&s(t,r),e}();function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(i,e);var t,n,r,o=h(i);function i(){return f(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"open",value:function(e,t){d(v(i.prototype),"open",this).call(this);var n=this._modal.querySelector(".popup__image");n.setAttribute("src",""+t),n.alt="фото "+e,this._modal.querySelector(".popup__subtitle").textContent=e}}])&&_(t.prototype,n),r&&_(t,r),i}(l);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t,n){return(S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return L(this,n)}}function L(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?C(e):t}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(i,e);var t,n,r,o=w(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e))._submitButton=n._modal.querySelector(".popup__save-button"),n._form=n._modal.querySelector(".popup__container"),n._submitHandler=t,n._inputList=Array.from(n._modal.querySelectorAll(".popup__input")),n._submitHandlerWithData=n._submitHandlerWithData.bind(C(n)),n}return t=i,(n=[{key:"_getInputValues",value:function(){var e={};return this._inputList.forEach((function(t){e[t.name]=t.value})),e}},{key:"_submitHandlerWithData",value:function(){this._inputValues=this._getInputValues(),this._submitHandler(this._inputValues)}},{key:"setEventListeners",value:function(){S(O(i.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",this._submitHandlerWithData)}},{key:"close",value:function(){S(O(i.prototype),"close",this).call(this),this._form.validator.clearErrors(),this._form.reset()}}])&&g(t.prototype,n),r&&g(t,r),i}(l);function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var I=function(){function e(t){var n=t.nameSelector,r=t.occupationSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._occupation=document.querySelector(r)}var t,n,r;return t=e,(n=[{key:"getUserInfo",value:function(){var e={};return e.name=this._name.textContent,e.occupation=this._occupation.textContent,e}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.occupation;this._name.textContent=t,this._occupation.textContent=n}}])&&q(t.prototype,n),r&&q(t,r),e}(),P={formSelector:".popup__container_type_input",inputSelector:".popup__input",submitButtonSelector:".popup__save-button",inactiveButtonClass:"popup__save-button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},x=document.querySelector(".profile__edit-button"),B=document.querySelector(".profile__add-button"),R=document.querySelector(".popup_type_edit").querySelector(".popup__container"),T=document.querySelector(".popup__input_type_name"),D=document.querySelector(".popup__input_type_occupation"),A=document.querySelector(".popup__input_type_place"),H=document.querySelector(".popup__input_type_link"),V=new I({nameSelector:".profile__name",occupationSelector:".profile__occupation"}),M=new b(".popup_type_image"),U=new j(".popup_type_edit",(function(e){V.setUserInfo(e),this.close()})),W=new j(".popup_type_new-card",(function(e){var t=new u({name:e.place,link:e.link},"#place",z).renderCard();N.insertItem(t),A.value="",H.value="",this.close()}));function z(e,t){M.open(e,t)}M.setEventListeners(),U.setEventListeners(),W.setEventListeners();var N=new c({items:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:function(e){var t=new u(e,"#place",z).renderCard();N.insertItem(t)}},".cards");N.renderItems(),Array.from(document.querySelectorAll(P.formSelector)).forEach((function(e){var t=new o(P,e);t.enableValidation(),e.validator=t})),x.addEventListener("click",(function(){U.open();var e=V.getUserInfo();T.value=e.name,D.value=e.occupation,setTimeout((function(){R.querySelector(".popup__input").focus()}),100)})),B.addEventListener("click",(function(){W.open()}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJGb3JtVmFsaWRhdG9yIiwidmFsaWRhdGlvbkRhdGEiLCJmb3JtRWxlbWVudCIsInRoaXMiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJfZ2V0SW5wdXRMaXN0IiwiX2dldFN1Ym1pdEJ1dHRvbkVsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfaW5wdXRMaXN0IiwiZm9yRWFjaCIsIml0ZW0iLCJfaGlkZUlucHV0RXJyb3IiLCJfdG9nZ2xlU3VibWl0QnV0dG9uU3RhdGUiLCJfc3VibWl0QnV0dG9uIiwiaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImJ1dHRvbkVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiX2J1dHRvbkVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiX2dldEVycm9yRWxlbWVudCIsImNsYXNzTGlzdCIsInJlbW92ZSIsInRleHRDb250ZW50IiwiZXJyb3JNZXNzYWdlIiwiYWRkIiwiX2hhc0ludmFsaWRJbnB1dCIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsInNvbWUiLCJDYXJkIiwiZGF0YSIsInRlbXBsYXRlU2VsZWN0b3IiLCJwb3B1cEhhbmRsZXIiLCJfbmFtZSIsIl9saW5rIiwibGluayIsIl90ZW1wbGF0ZVNlbGVjdG9yIiwiX3BvcHVwSGFuZGxlciIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsInRhcmdldCIsInRvZ2dsZSIsInBhcmVudEVsZW1lbnQiLCJjYXJkSW1hZ2UiLCJfZWxlbWVudCIsIl9oYW5kbGVMaWtlQnV0dG9uIiwiX2RlbGV0ZUNhcmQiLCJfZ2V0VGVtcGxhdGUiLCJuZXdDYXJkSW1hZ2UiLCJzcmMiLCJhbHQiLCJTZWN0aW9uIiwic2VjdGlvblNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9yZW5kZXJlZEl0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImVsZW1lbnQiLCJhcHBlbmQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfbW9kYWwiLCJfY2xvc2VCdXR0b24iLCJjbG9zZSIsIl9oYW5kbGVFc2NDbG9zZSIsImNvbnRhaW5zIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIlBvcHVwV2l0aEltYWdlIiwiaW1hZ2UiLCJQb3B1cFdpdGhGb3JtIiwic3VibWl0SGFuZGxlciIsIl9mb3JtIiwiX3N1Ym1pdEhhbmRsZXIiLCJfc3VibWl0SGFuZGxlcldpdGhEYXRhIiwiaW5wdXRWYWx1ZXNPYmoiLCJfaW5wdXRWYWx1ZXMiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJ2YWxpZGF0b3IiLCJjbGVhckVycm9ycyIsInJlc2V0IiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJvY2N1cGF0aW9uU2VsZWN0b3IiLCJfb2NjdXBhdGlvbiIsInVzZXJEYXRhIiwib2NjdXBhdGlvbiIsInZhbGlkYXRpb25Db25maWciLCJmb3JtU2VsZWN0b3IiLCJlZGl0QnV0dG9uIiwiYWRkQnV0dG9uIiwicG9wdXBFZGl0Q29udGFpbmVyIiwibmFtZUlucHV0Iiwib2NjdXBhdGlvbklucHV0IiwicGxhY2VJbnB1dCIsImxpbmtJbnB1dCIsInVzZXIiLCJpbWFnZVBvcHVwIiwiZWRpdE1vZGFsIiwic2V0VXNlckluZm8iLCJuZXdDYXJkTW9kYWwiLCJjYXJkRWxlbWVudCIsInBsYWNlIiwiaGFuZGxlUHJldmlld1BpY3R1cmUiLCJyZW5kZXJDYXJkIiwiY2FyZHNHcmlkIiwiaW5zZXJ0SXRlbSIsIm9wZW4iLCJzZXRFdmVudExpc3RlbmVycyIsInJlbmRlckl0ZW1zIiwiZW5hYmxlVmFsaWRhdGlvbiIsImdldFVzZXJJbmZvIiwic2V0VGltZW91dCIsImZvY3VzIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMs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d0csRUFBVVMsT0FDVixJQUFNdEIsRUFBV1csRUFBS2UsY0FDdEJuQixFQUFVbEksTUFBUTJILEVBQVNySSxLQUMzQjZJLEVBQWdCbkksTUFBUTJILEVBQVNDLFdBQ2pDMEIsWUFBVyxXQUNQckIsRUFBbUJsRixjQUFjLGlCQUFpQndHLFVBQ25ELFFBdUNQdkIsRUFBVWhHLGlCQUFpQixTQUFTLFdBQVEwRyxFQUFhTyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEpO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gICAgY29uc3RydWN0b3IodmFsaWRhdGlvbkRhdGEsIGZvcm1FbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSB2YWxpZGF0aW9uRGF0YS5pbnB1dFNlbGVjdG9yO1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHZhbGlkYXRpb25EYXRhLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgICAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gdmFsaWRhdGlvbkRhdGEuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICAgICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gdmFsaWRhdGlvbkRhdGEuaW5wdXRFcnJvckNsYXNzO1xuICAgICAgICB0aGlzLl9lcnJvckNsYXNzID0gdmFsaWRhdGlvbkRhdGEuZXJyb3JDbGFzcztcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgICB9XG5cbiAgICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgICAgICB0aGlzLl9nZXRJbnB1dExpc3QoKTtcbiAgICAgICAgdGhpcy5fZ2V0U3VibWl0QnV0dG9uRWxlbWVudCgpO1xuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7IGV2dC5wcmV2ZW50RGVmYXVsdCgpIH0pO1xuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIH1cblxuICAgIGNsZWFyRXJyb3JzKCkge1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaXRlbSkgPT4geyB0aGlzLl9oaWRlSW5wdXRFcnJvcihpdGVtKTsgfSk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZVN1Ym1pdEJ1dHRvblN0YXRlKHRoaXMuX3N1Ym1pdEJ1dHRvbik7XG4gICAgfVxuXG4gICAgX2dldElucHV0TGlzdCgpIHtcbiAgICAgICAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpKTtcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gaW5wdXRMaXN0O1xuICAgICAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0O1xuICAgIH1cbiAgICBfZ2V0U3VibWl0QnV0dG9uRWxlbWVudCgpIHtcbiAgICAgICAgY29uc3QgYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gYnV0dG9uRWxlbWVudDtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1dHRvbkVsZW1lbnQ7XG4gICAgfVxuXG4gICAgX2dldEVycm9yRWxlbWVudChpbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLnBvcHVwX19lcnJvcl90eXBlXyR7aW5wdXRFbGVtZW50Lm5hbWV9YCk7XG4gICAgICAgIHJldHVybiBlcnJvckVsZW1lbnQ7XG4gICAgfVxuXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaXRlbSk7XG4gICAgICAgICAgICAgICAgdGhpcy5fdG9nZ2xlU3VibWl0QnV0dG9uU3RhdGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl90b2dnbGVTdWJtaXRCdXR0b25TdGF0ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgICAgIGlmIChpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2dldEVycm9yRWxlbWVudChpbnB1dEVsZW1lbnQpO1xuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XG4gICAgfVxuXG4gICAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2dldEVycm9yRWxlbWVudChpbnB1dEVsZW1lbnQpO1xuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAgIH1cblxuICAgIF90b2dnbGVTdWJtaXRCdXR0b25TdGF0ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dExpc3QpKSB7XG4gICAgICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2lucHV0TGlzdC5zb21lKGl0ZW0gPT4gIWl0ZW0udmFsaWRpdHkudmFsaWQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gICAgY29uc3RydWN0b3IoZGF0YSwgdGVtcGxhdGVTZWxlY3RvciwgcG9wdXBIYW5kbGVyKSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgICAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwSGFuZGxlciA9IHBvcHVwSGFuZGxlcjtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAgICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yKVxyXG4gICAgICAgICAgICAuY29udGVudFxyXG4gICAgICAgICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlTGlrZUJ1dHRvbihldnQpIHtcclxuICAgICAgICBjb25zdCBjbGlja2VkSXRlbSA9IGV2dC50YXJnZXQ7XHJcbiAgICAgICAgY2xpY2tlZEl0ZW0uY2xhc3NMaXN0LnRvZ2dsZSgnY2FyZF9fbGlrZS1idXR0b25fcHJlc3NlZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIF9kZWxldGVDYXJkKGV2dCkge1xyXG4gICAgICAgIGNvbnN0IGNsaWNrZWRJdGVtID0gZXZ0LnRhcmdldDtcclxuICAgICAgICBjbGlja2VkSXRlbS5wYXJlbnRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgfVxyXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKGNhcmRJbWFnZSkge1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UtYnV0dG9uJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uKTtcclxuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19kZWxldGUtYnV0dG9uJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9kZWxldGVDYXJkKTtcclxuICAgICAgICBjYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9wb3B1cEhhbmRsZXIodGhpcy5fbmFtZSwgdGhpcy5fbGluaykpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlckNhcmQoKSB7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICAgICAgY29uc3QgbmV3Q2FyZEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1hZ2UnKTtcclxuICAgICAgICBuZXdDYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgICAgICBuZXdDYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycyhuZXdDYXJkSW1hZ2UpO1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX3RpdGxlJykudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIHNlY3Rpb25TZWxlY3Rvcikge1xuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGl0ZW1zO1xuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VjdGlvblNlbGVjdG9yKTtcbiAgICAgICAgfVxuICAgICAgICAvL9GE0YPQvdC60YbQuNGPIC0g0L7RgtGA0LjRgdC+0LLRidC40Log0YHQtdC60YbQuNC4XG4gICAgcmVuZGVySXRlbXMoKSB7XG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvL9GE0YPQvdC60YbQuNGPLCDQutC+0YLQvtGA0LDRjyDQtNC+0LHQsNCy0LvRj9C10YIgRE9NLdGN0LvQtdC80LXQvdGCINCyINC60L7QvdGC0LXQudC90LXRgFxuICAgIGluc2VydEl0ZW0oZWxlbWVudCkge1xuICAgICAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xuICAgIH1cblxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5fbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX21vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UtYnV0dG9uJyk7XG4gICAgICAgIHRoaXMuY2xvc2UgPSB0aGlzLmNsb3NlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgICB9XG5cbiAgICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZSk7XG4gICAgICAgIHRoaXMuX21vZGFsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9vcGVuZWQnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgb3BlbigpIHtcbiAgICAgICAgdGhpcy5fbW9kYWwuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIH1cblxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLl9tb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG5cbiAgICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcblxuICAgIG9wZW4obmFtZSwgbGluaykge1xuICAgICAgICBzdXBlci5vcGVuKCk7XG4gICAgICAgIGNvbnN0IGltYWdlID0gdGhpcy5fbW9kYWwucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZScpO1xuICAgICAgICBpbWFnZS5zZXRBdHRyaWJ1dGUoJ3NyYycsICcnICsgbGluayk7XG4gICAgICAgIGltYWdlLmFsdCA9ICfRhNC+0YLQviAnICsgbmFtZTtcbiAgICAgICAgdGhpcy5fbW9kYWwucXVlcnlTZWxlY3RvcignLnBvcHVwX19zdWJ0aXRsZScpLnRleHRDb250ZW50ID0gbmFtZTtcblxuICAgIH1cblxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBzdWJtaXRIYW5kbGVyKSB7XG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9tb2RhbC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3NhdmUtYnV0dG9uJyk7XG4gICAgICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9tb2RhbC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2NvbnRhaW5lcicpO1xuICAgICAgICB0aGlzLl9zdWJtaXRIYW5kbGVyID0gc3VibWl0SGFuZGxlcjtcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9tb2RhbC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2lucHV0JykpO1xuICAgICAgICB0aGlzLl9zdWJtaXRIYW5kbGVyV2l0aERhdGEgPSB0aGlzLl9zdWJtaXRIYW5kbGVyV2l0aERhdGEuYmluZCh0aGlzKTtcbiAgICB9XG5cbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgICAgIGNvbnN0IGlucHV0VmFsdWVzT2JqID0ge307XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgICAgaW5wdXRWYWx1ZXNPYmpbaXRlbS5uYW1lXSA9IGl0ZW0udmFsdWU7XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBpbnB1dFZhbHVlc09iajtcbiAgICB9XG5cbiAgICBfc3VibWl0SGFuZGxlcldpdGhEYXRhKCkge1xuICAgICAgICB0aGlzLl9pbnB1dFZhbHVlcyA9IHRoaXMuX2dldElucHV0VmFsdWVzKCk7XG4gICAgICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIodGhpcy5faW5wdXRWYWx1ZXMpO1xuICAgIH1cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLl9zdWJtaXRIYW5kbGVyV2l0aERhdGEpO1xuXG5cbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgICAgIHRoaXMuX2Zvcm0udmFsaWRhdG9yLmNsZWFyRXJyb3JzKCk7XG4gICAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcblxuXG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICAgIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBvY2N1cGF0aW9uU2VsZWN0b3IgfSkge1xuICAgICAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9vY2N1cGF0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvY2N1cGF0aW9uU2VsZWN0b3IpO1xuXG5cbiAgICB9XG4gICAgZ2V0VXNlckluZm8oKSB7XG4gICAgICAgIGNvbnN0IHVzZXJEYXRhID0ge307XG4gICAgICAgIHVzZXJEYXRhLm5hbWUgPSB0aGlzLl9uYW1lLnRleHRDb250ZW50O1xuICAgICAgICB1c2VyRGF0YS5vY2N1cGF0aW9uID0gdGhpcy5fb2NjdXBhdGlvbi50ZXh0Q29udGVudDtcbiAgICAgICAgcmV0dXJuIHVzZXJEYXRhO1xuICAgIH1cbiAgICBzZXRVc2VySW5mbyh7IG5hbWUsIG9jY3VwYXRpb24gfSkge1xuICAgICAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICAgICAgdGhpcy5fb2NjdXBhdGlvbi50ZXh0Q29udGVudCA9IG9jY3VwYXRpb247XG4gICAgfVxufVxuIiwiaW1wb3J0ICcuL2luZGV4LmNzcyc7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xuaW1wb3J0IENhcmQgZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJztcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xuXG5cbmNvbnN0IHZhbGlkYXRpb25Db25maWcgPSB7XG4gICAgZm9ybVNlbGVjdG9yOiAnLnBvcHVwX19jb250YWluZXJfdHlwZV9pbnB1dCcsXG4gICAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faW5wdXQnLFxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19zYXZlLWJ1dHRvbicsXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogJ3BvcHVwX19zYXZlLWJ1dHRvbl9kaXNhYmxlZCcsXG4gICAgaW5wdXRFcnJvckNsYXNzOiAncG9wdXBfX2lucHV0X3R5cGVfZXJyb3InLFxuICAgIGVycm9yQ2xhc3M6ICdwb3B1cF9fZXJyb3JfdmlzaWJsZSdcbn07XG5cbmNvbnN0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idXR0b24nKTtcbmNvbnN0IGFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnV0dG9uJyk7XG5jb25zdCBwb3B1cEVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9lZGl0Jyk7XG5jb25zdCBwb3B1cEVkaXRDb250YWluZXIgPSBwb3B1cEVkaXQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jb250YWluZXInKTtcblxuY29uc3QgbmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF90eXBlX25hbWUnKTtcbmNvbnN0IG9jY3VwYXRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV9vY2N1cGF0aW9uJyk7XG5jb25zdCBwbGFjZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF90eXBlX3BsYWNlJyk7XG5jb25zdCBsaW5rSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfbGluaycpO1xuXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbe1xuICAgICAgICBuYW1lOiAn0JDRgNGF0YvQtycsXG4gICAgICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYXJraHl6LmpwZydcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogJ9Cn0LXQu9GP0LHQuNC90YHQutCw0Y8g0L7QsdC70LDRgdGC0YwnLFxuICAgICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2NoZWx5YWJpbnNrLW9ibGFzdC5qcGcnXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6ICfQmNCy0LDQvdC+0LLQvicsXG4gICAgICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvaXZhbm92by5qcGcnXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6ICfQmtCw0LzRh9Cw0YLQutCwJyxcbiAgICAgICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9rYW1jaGF0a2EuanBnJ1xuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiAn0KXQvtC70LzQvtCz0L7RgNGB0LrQuNC5INGA0LDQudC+0L0nLFxuICAgICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2tob2xtb2dvcnNreS1yYXlvbi5qcGcnXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6ICfQkdCw0LnQutCw0LsnLFxuICAgICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2JhaWthbC5qcGcnXG4gICAgfVxuXTtcbi8v0YHQvtC30LTQsNC10Lwg0Y3QutC30LXQvNC/0LvRj9GA0Ysg0LrQu9Cw0YHRgdC+0LJcbmNvbnN0IHVzZXIgPSBuZXcgVXNlckluZm8oeyBuYW1lU2VsZWN0b3I6ICcucHJvZmlsZV9fbmFtZScsIG9jY3VwYXRpb25TZWxlY3RvcjogJy5wcm9maWxlX19vY2N1cGF0aW9uJyB9KTtcbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoJy5wb3B1cF90eXBlX2ltYWdlJyk7XG5jb25zdCBlZGl0TW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX3R5cGVfZWRpdCcsIGZvcm1FZGl0U3VibWl0SGFuZGxlcik7XG5jb25zdCBuZXdDYXJkTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX3R5cGVfbmV3LWNhcmQnLCBmb3JtTmV3Q2FyZFN1Ym1pdEhhbmRsZXIpO1xuXG4vL9C90LDQstC10YjQuNCy0LDQtdC8INGB0LvRg9GI0LDRgtC10LvQuFxuaW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuZWRpdE1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5uZXdDYXJkTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuXG4vL9GE0YPQvdC60YbQuNC4INC+0YLQutGA0YvRgtC40Y8g0LzQvtC00LDQu9GM0L3Ri9GFINC+0LrQvtC9XG5mdW5jdGlvbiBoYW5kbGVQcmV2aWV3UGljdHVyZShuYW1lLCBsaW5rKSB7XG4gICAgaW1hZ2VQb3B1cC5vcGVuKG5hbWUsIGxpbmspO1xufVxuXG5mdW5jdGlvbiBvcGVuRWRpdE1vZGFsKCkge1xuICAgIGVkaXRNb2RhbC5vcGVuKCk7XG4gICAgY29uc3QgdXNlckRhdGEgPSB1c2VyLmdldFVzZXJJbmZvKCk7XG4gICAgbmFtZUlucHV0LnZhbHVlID0gdXNlckRhdGEubmFtZTtcbiAgICBvY2N1cGF0aW9uSW5wdXQudmFsdWUgPSB1c2VyRGF0YS5vY2N1cGF0aW9uO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIHBvcHVwRWRpdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0JykuZm9jdXMoKTtcbiAgICB9LCAxMDApO1xufVxuXG4vL9GE0YPQvdC60YbQuNC4IC0g0L7QsdGA0LDQsdC+0YLRh9C40LrQuCDRgdCw0LHQvNC40YLQvtCyXG5mdW5jdGlvbiBmb3JtRWRpdFN1Ym1pdEhhbmRsZXIoZGF0YSkge1xuICAgIHVzZXIuc2V0VXNlckluZm8oZGF0YSk7XG4gICAgdGhpcy5jbG9zZSgpO1xufVxuXG5mdW5jdGlvbiBmb3JtTmV3Q2FyZFN1Ym1pdEhhbmRsZXIoZGF0YSkge1xuICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCh7IG5hbWU6IGRhdGEucGxhY2UsIGxpbms6IGRhdGEubGluayB9LCAnI3BsYWNlJywgaGFuZGxlUHJldmlld1BpY3R1cmUpO1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5yZW5kZXJDYXJkKCk7XG4gICAgY2FyZHNHcmlkLmluc2VydEl0ZW0oY2FyZEVsZW1lbnQpO1xuICAgIHBsYWNlSW5wdXQudmFsdWUgPSAnJztcbiAgICBsaW5rSW5wdXQudmFsdWUgPSAnJztcbiAgICB0aGlzLmNsb3NlKCk7XG59XG5cbi8v0YHQvtC30LTQsNC90LjQtSDQv9C10YDQstC+0L3QsNGH0LDQu9GM0L3QvtC5INGB0LXRgtC60Lgg0YEg0LrQsNGA0YLQvtGH0LrQsNC80LhcbmNvbnN0IGNhcmRzR3JpZCA9IG5ldyBTZWN0aW9uKHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoaXRlbSwgJyNwbGFjZScsIGhhbmRsZVByZXZpZXdQaWN0dXJlKTtcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLnJlbmRlckNhcmQoKTtcbiAgICAgICAgY2FyZHNHcmlkLmluc2VydEl0ZW0oY2FyZEVsZW1lbnQpO1xuICAgIH1cbn0sICcuY2FyZHMnKTtcbmNhcmRzR3JpZC5yZW5kZXJJdGVtcygpO1xuXG4vL9GB0L7Qt9C00LDQvdC40LUg0Y3QutC30LXQvNC/0LvRj9GA0L7QsiDQutC70LDRgdGB0LAgRm9ybVZhbGlkYXRvciDQvdCwINC60LDQttC00L7QuSDRhNC+0YDQvNC1INC4INC/0YDQuNCy0Y/Qt9C60LAg0Log0YTQvtGA0LzQtVxuY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodmFsaWRhdGlvbkNvbmZpZy5mb3JtU2VsZWN0b3IpKTtcbmZvcm1MaXN0LmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBpdGVtKTtcbiAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICAgIGl0ZW0udmFsaWRhdG9yID0gdmFsaWRhdG9yO1xufSk7XG5cbi8v0YPRgdGC0LDQvdC+0LLQutCwINGB0LvRg9GI0LDRgtC10LvQtdC5INC90LAg0LrQvdC+0L/QutC4INGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0L/RgNC+0YTQuNC70Y8g0Lgg0LTQvtCx0LDQstC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxuZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5FZGl0TW9kYWwpO1xuYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4geyBuZXdDYXJkTW9kYWwub3BlbigpIH0pO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==